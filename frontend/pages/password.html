<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RakshaNetra | Password Strength</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Space Grotesk', sans-serif; }
</style>
</head>

<body class="bg-[#101f22] text-white">

<main class="max-w-xl mx-auto mt-20 space-y-6">

<a href="../dashboard.html"
   class="inline-block mb-6 text-cyan-400 hover:underline">
  ‚Üê Back to Dashboard
</a>

<h1 class="text-4xl font-black text-center">Password Strength Analyzer</h1>

<input
  id="passwordInput"
  type="password"
  placeholder="Enter your password"
  class="w-full p-4 rounded-lg bg-[#111718] border border-[#283639] focus:outline-none focus:border-cyan-400"
/>

<button
  onclick="checkPassword()"
  class="w-full bg-cyan-400 text-black font-bold py-3 rounded-lg hover:opacity-90"
>
  Analyze Password
</button>

<div id="result" class="hidden p-4 rounded-lg"></div>

</main>

<script>
async function checkPassword() {
    const password = document.getElementById("passwordInput").value;
    const resultDiv = document.getElementById("result");

    if (!password) {
        alert("Enter a password first");
        return;
    }

    resultDiv.classList.remove("hidden");
    resultDiv.className = "p-4 rounded-lg bg-slate-800";
    resultDiv.innerHTML = "üîç Analyzing password...";

    try {
        const res = await fetch(
            "http://127.0.0.1:5000/api/check-password",
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ password })
            }
        );

        const data = await res.json();

        let color = "bg-green-900 text-green-300";
        if (data.strength === "MEDIUM") color = "bg-yellow-900 text-yellow-300";
        if (data.strength === "WEAK") color = "bg-red-900 text-red-300";

        resultDiv.className = `p-4 rounded-lg ${color}`;

        resultDiv.innerHTML = `
          <b>Status:</b> ${data.status}<br>
          <b>Strength:</b> ${data.strength}<br>
          <b>Score:</b> ${data.score}/100<br>
          <b>Entropy:</b> ${data.entropy} bits<br><br>
          <b>Issues:</b><br>
          ${data.reasons.length ? data.reasons.join("<br>") : "Excellent password!"}
        `;
    } catch (err) {
        resultDiv.className = "p-4 rounded-lg bg-red-900 text-red-300";
        resultDiv.innerHTML = "‚ùå Backend not reachable";
    }
}
</script>

</body>
</html>
